<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="3.1 Setting up the R environment | New statistics for the design researcher" />
<meta property="og:type" content="book" />


<meta property="og:description" content="A statistics book for designers, human factors specialists, UX researchers, applied psychologists and everyone else who works hard to make this world a better place." />
<meta name="github-repo" content="schmettow/New_Stats" />

<meta name="author" content="Martin Schmettow" />

<meta name="date" content="2020-05-06" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="A statistics book for designers, human factors specialists, UX researchers, applied psychologists and everyone else who works hard to make this world a better place.">

<title>3.1 Setting up the R environment | New statistics for the design researcher</title>

<link href="libs/tufte-css-2015.12.29/tufte-fonts.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-background.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-italics.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />





</head>

<body>



<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="part"><span><b>I Preparations</b></span></li>
<li class="has-sub"><a href="index.html#introduction"><span class="toc-section-number">1</span> Introduction</a><ul>
<li class="has-sub"><a href="1-1-whom-this-book-is-for.html#whom-this-book-is-for"><span class="toc-section-number">1.1</span> Whom this book is for</a><ul>
<li><a href="1-1-whom-this-book-is-for.html#the-empirical-design-researcher"><span class="toc-section-number">1.1.1</span> The empirical design researcher</a></li>
<li><a href="1-1-whom-this-book-is-for.html#the-experimentalist"><span class="toc-section-number">1.1.2</span> The experimentalist</a></li>
<li><a href="1-1-whom-this-book-is-for.html#the-applied-researcher"><span class="toc-section-number">1.1.3</span> The applied researcher</a></li>
</ul></li>
<li><a href="1-2-assumptions.html#assumptions"><span class="toc-section-number">1.2</span> Assumptions</a></li>
<li><a href="1-3-how-to-read-this-book.html#how-to-read-this-book"><span class="toc-section-number">1.3</span> How to read this book</a></li>
<li><a href="1-4-quantitative-design-research.html#quantitative-design-research"><span class="toc-section-number">1.4</span> Quantitative design research</a></li>
<li><a href="1-5-studies.html#studies"><span class="toc-section-number">1.5</span> Studies</a></li>
<li class="has-sub"><a href="1-6-observations-and-measurestbc.html#observations-and-measurestbc"><span class="toc-section-number">1.6</span> Observations and measures[TBC]</a><ul>
<li><a href="1-6-observations-and-measurestbc.html#interaction-sequences"><span class="toc-section-number">1.6.1</span> Interaction sequences</a></li>
<li><a href="1-6-observations-and-measurestbc.html#performance-measures"><span class="toc-section-number">1.6.2</span> performance measures</a></li>
<li><a href="1-6-observations-and-measurestbc.html#experience-tbd"><span class="toc-section-number">1.6.3</span> experience [TBD]</a></li>
<li><a href="1-6-observations-and-measurestbc.html#design-features-tbd"><span class="toc-section-number">1.6.4</span> design features [TBD]</a></li>
<li><a href="1-6-observations-and-measurestbc.html#the-human-factor-tbd"><span class="toc-section-number">1.6.5</span> the human factor [TBD]</a></li>
<li><a href="1-6-observations-and-measurestbc.html#situations-tbd"><span class="toc-section-number">1.6.6</span> situations [TBD]</a></li>
</ul></li>
</ul></li>
<li><a href="2-elements-of-bayesian-statistics.html#elements-of-bayesian-statistics"><span class="toc-section-number">2</span> Elements of Bayesian Statistics</a></li>
<li class="has-sub"><a href="3-getting-started-r.html#getting_started_r"><span class="toc-section-number">3</span> Getting started with R</a><ul>
<li class="has-sub"><a href="3-1-setting-up-the-r-environment.html#setting-up-the-r-environment"><span class="toc-section-number">3.1</span> Setting up the R environment</a><ul>
<li><a href="3-1-setting-up-the-r-environment.html#installing-cran-packages"><span class="toc-section-number">3.1.1</span> Installing CRAN packages</a></li>
<li><a href="3-1-setting-up-the-r-environment.html#installing-packages-from-github"><span class="toc-section-number">3.1.2</span> Installing packages from Github</a></li>
<li><a href="3-1-setting-up-the-r-environment.html#first_program"><span class="toc-section-number">3.1.3</span> A first statistical program</a></li>
<li><a href="3-1-setting-up-the-r-environment.html#bibliographic-notes"><span class="toc-section-number">3.1.4</span> Bibliographic notes</a></li>
</ul></li>
<li class="has-sub"><a href="3-2-learning-r-a-primer.html#learning-r-a-primer"><span class="toc-section-number">3.2</span> Learning R: a primer</a><ul>
<li><a href="3-2-learning-r-a-primer.html#assigning-and-calling-objects"><span class="toc-section-number">3.2.1</span> Assigning and calling Objects</a></li>
<li><a href="3-2-learning-r-a-primer.html#vectors"><span class="toc-section-number">3.2.2</span> Vectors</a></li>
<li><a href="3-2-learning-r-a-primer.html#basic-object-types"><span class="toc-section-number">3.2.3</span> Basic object types</a></li>
<li><a href="3-2-learning-r-a-primer.html#operators-and-functions"><span class="toc-section-number">3.2.4</span> Operators and functions</a></li>
<li><a href="3-2-learning-r-a-primer.html#storing-data-in-data-frames"><span class="toc-section-number">3.2.5</span> Storing data in data frames</a></li>
<li><a href="3-2-learning-r-a-primer.html#import-export-and-archiving"><span class="toc-section-number">3.2.6</span> Import, export and archiving</a></li>
<li><a href="3-2-learning-r-a-primer.html#case-environments"><span class="toc-section-number">3.2.7</span> Case environments</a></li>
<li><a href="3-2-learning-r-a-primer.html#structuring-data"><span class="toc-section-number">3.2.8</span> Structuring data</a></li>
<li><a href="3-2-learning-r-a-primer.html#data-transformation"><span class="toc-section-number">3.2.9</span> Data transformation</a></li>
<li><a href="3-2-learning-r-a-primer.html#plotting-data"><span class="toc-section-number">3.2.10</span> Plotting data</a></li>
<li><a href="3-2-learning-r-a-primer.html#fitting-regression-models"><span class="toc-section-number">3.2.11</span> Fitting regression models</a></li>
<li><a href="3-2-learning-r-a-primer.html#knitting-statistical-reports"><span class="toc-section-number">3.2.12</span> Knitting statistical reports</a></li>
<li><a href="3-2-learning-r-a-primer.html#exercises"><span class="toc-section-number">3.2.13</span> Exercises</a></li>
<li><a href="3-2-learning-r-a-primer.html#bibliographic-notes-1"><span class="toc-section-number">3.2.14</span> Bibliographic notes</a></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="setting-up-the-r-environment" class="section level2">
<h2><span class="header-section-number">3.1</span> Setting up the R environment</h2>
<p>First, we <!-- #4 --> have to make sure that you have the two essential applications R and Rstudio downloaded and installed on your computer. The two programs can be retrieved from the addresses below. Make sure to select the version fit for your operating system.</p>
<ul>
<li><a href="http://www.r-project.org">R</a></li>
<li><a href="http://www.rstudio.com">Rstudio</a></li>
</ul>
<p>If you fully own the computer you are working with, meaning that you have administrator rights, just do the usual downloading and running of the setup. If everything is fine, you’ll find R and Rstudio installed under <code>c\Programs\</code> and both are in your computers start menu. You can directly proceed to the installation of packages.</p>
<p>In corporate environments, two issues can arise with the installation: first a user may not have administrator rights to install programs to the common path <code>c:\programs\</code>. Second, the home directory may reside on a network drive, which is likely to cause trouble when installing packages.</p>
<p>If you have no administrator rights, you must choose your home directory during the setup. If that is a local directory, (<code>c:/Users/YourName/</code>), this should work fine and you can proceed with the installation of packages.</p>
<p>If your home directory (i.e. <code>My Documents</code>) is located on a network drive, this is likely to cause trouble. In such a case, you must install R and Rstudio to a local directory (on your computers hard drive), where you have full read/write access. In the following, it is assumed that this directory is <code>D:/Users/YourName/</code>:</p>
<ol style="list-style-type: decimal">
<li>create a directory <code>D:/Users/YourName/R/</code>. This is where both programs, as well as packages will reside.</li>
<li>create a sub directory <code>Rlibrary</code> where all additional packages reside (R comes with a pack of standard packages, which are in a read-only system directory).</li>
<li>start Rstudio</li>
<li>create a regular text file <code>File -&gt; New File -&gt; Text file</code></li>
<li>copy and paste code from the box below</li>
<li>save the file as <code>.Rprofile</code> in <code>D:/Users/YourName/R/</code></li>
<li>open the menu and go to <code>Tools -&gt; Global options -&gt; General -&gt; Default working directory</code>. Select <code>D:/Users/YourName/R/</code>.</li>
</ol>
<p>With the above steps you have created a customized start-up profile for R. The profile primarily sets the library path to point to a directory on the computers drive. As you are owning this directory, R can install the packages without admin rights. In the second part, you configure Rstudio’s default path, which is where R, invoked from Rstudio, searches for the .Rprofile.</p>
<p>After closing and reopening Rstudio, you should see a message in the console window saying:</p>
<blockquote>
<p>Loading .Rprofile in D:/Users/YourName/R/</p>
</blockquote>
<p>That means that R has found the <code>.Rprofile</code> file and loaded it at start-up. The <code>.Rprofile</code> file primarily sets the path of the <em>library</em>, which is the collection of packages you install yourself. Whether this was successful can be checked by entering the <code>console</code> window in Rstudio, type the command below and hit Enter.</p>
<p>If your installation went fine, you should see an output like the following. If the output lacks the first entry, your installation was not successful and you need to check all the above steps.</p>
<blockquote>
<p>[1] “D:/Users/YourName/R/Rlibrary” “C:/Program Files/R/R-3.3.0/library”</p>
</blockquote>
<div id="installing-cran-packages" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Installing CRAN packages</h3>
<p>While R comes with a set of standard packages, thousands of packages are available to enhance functionality for every purpose you can think of. Most packages are available from the <em>Comprehensive R Network Archive (CRAN)</em>.</p>
<p>For example, the package <em>foreign</em> is delivered with R and provides functions to read data files in various formats, e.g. SPSS files. The package <em>haven</em> is a rather new package, with enhanced functionality and usability. It is not delivered with R, hence, so we have to fetch it.</p>
<p>Generally, packages need to be <em>installed once</em> on your system and to be <em>loaded everytime</em> you need them. Installation is fairly straight-forward once your R environment has been setup correctly and you have an internet connection.</p>
<p>In this book we will use a number of additional packages from CRAN. The listed packages below are all required packages, all can be loaded using the <code>library(package)</code> command. The package <em>tidyverse</em> is a metapackage that installs and loads a number of modern packages. The ones being used in this book are:</p>
<ul>
<li><em>dplyr</em> and <em>tidyr</em> for data manipulation</li>
<li><em>ggplot</em> for graphics</li>
<li><em>haven</em> for reading and writing files from other statistical packages</li>
<li><em>readr</em> for reading and writing text-based data files (e.g., CSV)</li>
<li><em>readxl</em> for reading Excel files</li>
<li><em>stringr</em> for string matching and manipulation</li>
</ul>
<p>We start by <em>checking the packages</em>:</p>
<ol style="list-style-type: decimal">
<li>create a new R file by <code>File --&gt; New file --&gt; R script</code></li>
<li>copy and paste the above code to that file and run it. By repeatedly pressing <code>Ctrl-Return</code> you run every line one-by-one. As a first time user with a fresh installation, you will now see error messages like:</li>
</ol>
<blockquote>
<p>Error in library(tidyverse) : there is no package called ‘tidyverse’</p>
</blockquote>
<p>This means that the respective package is not yet present in your R library. Before you can use the package <em>tidyverse</em> you have to install it from CRAN. For doing so, use the built-in package management in RStudio, which fetches the package from the web and is to be found in the tab <em>Packages</em>. At the first time, you may have to select a repository and refresh the package list, before you can find and install packages. Then click <code>Install</code>, enter the names of the missing package(s) and install. On the R console the following command downloads and installs the package <em>tidyverse</em>.</p>
<p>CRAN is like a giant stream of software pebbles, shaped over time in a growing tide. Typically, a package gets better with every version, be it in reliability or versatility, so you want to be up-to-date. Rstudio has a nice dialogue to update packages and there is the R command:</p>
<p>Finally, run the complete code block at once by selecting it and <code>Ctrl-Enter</code>. You will see some output to the console, which you should check once again. Unless the output contains any error messages (like above), you have successfully installed and loaded all packages.</p>
<p><em>Note</em> that R has a somewhat idiosyncratic jargon: many languages, such as Java or Python, call “libraries” what R calls “packages”. <em>The</em> library in R is strictly the set of packages installed on your computer and the <code>library</code> command loads a package from the library.</p>
</div>
<div id="installing-packages-from-github" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Installing packages from Github</h3>
<p>Two packages, <em>mascutils</em> and <em>bayr</em> are written by the author of this book. They have not yet been committed to CRAN, but they are available on <em>Github</em> which is a general purpose versioning system for software developers and few authors. Fortunately, with the help of the <em>devtools</em> package it is rather easy to install these packages, too. Just enter the Rstudio console and type:</p>
<p>Again, you have to do that only once after installing R and you can afterwards load the packages with the <code>library</code> command. Only if the package gets an update to add functionality or remove bugs, you need to run these commands again.</p>
</div>
<div id="first_program" class="section level3">
<h3><span class="header-section-number">3.1.3</span> A first statistical program</h3>
<p>After you have set up your R environment, you are ready to run your first R program (you will not yet understand all the code, but as you proceed with this book, all will become clear):</p>
<ol style="list-style-type: decimal">
<li>Stay in the file where you have inserted and run the above code for loading the packages.</li>
<li>Find the <em>environment tab</em> in Rstudio. It should be empty.</li>
<li>Copy-and-paste the code below into your first file, right after library commands.</li>
<li>Run the code lines one-by-one and observe what happens (in RStudio: Ctrl-Enter)</li>
</ol>
<table>
<thead>
<tr class="header">
<th align="left">Group</th>
<th align="right">age</th>
<th align="right">outcome</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">control</td>
<td align="right">27</td>
<td align="right">221</td>
</tr>
<tr class="even">
<td align="left">control</td>
<td align="right">23</td>
<td align="right">201</td>
</tr>
<tr class="odd">
<td align="left">control</td>
<td align="right">35</td>
<td align="right">203</td>
</tr>
<tr class="even">
<td align="left">control</td>
<td align="right">30</td>
<td align="right">220</td>
</tr>
<tr class="odd">
<td align="left">experimental</td>
<td align="right">24</td>
<td align="right">267</td>
</tr>
<tr class="even">
<td align="left">experimental</td>
<td align="right">20</td>
<td align="right">261</td>
</tr>
<tr class="odd">
<td align="left">control</td>
<td align="right">25</td>
<td align="right">212</td>
</tr>
<tr class="even">
<td align="left">experimental</td>
<td align="right">25</td>
<td align="right">254<img src="Getting_started_with_R_files/figure-html/first_simulation_1-1.png" width="66%"  /><img src="Getting_started_with_R_files/figure-html/first_simulation_1-2.png" width="66%"  /></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="left">fixef</th>
<th align="right">center</th>
<th align="right">lower</th>
<th align="right">upper</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Intercept</td>
<td align="right">209.9</td>
<td align="right">207</td>
<td align="right">213.0</td>
</tr>
<tr class="even">
<td align="left">Groupexperimental</td>
<td align="right">41.4</td>
<td align="right">37</td>
<td align="right">45.6</td>
</tr>
</tbody>
</table>
<p>Observe Console, Environment and Plots. Did you see</p>
<ul>
<li>how the <em>Environment</em> window is populated with new variables (Values and Data)?</li>
<li>a table appears in the <em>Console</em>, when executing the <code>summary(Experiment)</code> command?</li>
<li>how the “camel-against-the-light” in <em>Plots</em> tab morphed into “two-piles-of-colored-sugar”?</li>
</ul>
<p>Congratulations! You have just</p>
<ul>
<li>simulated data of a virtual experiment with two groups</li>
<li>summarized the data</li>
<li>plotted the data and</li>
<li>estimated a Bayesian regression model that compares the two groups.</li>
</ul>
<p>Isn’t it amazing, that in less than 20 simple statements we have just reached the level of a second-year bachelor student? Still, you may find the R output a little inconvenient, as you may want to save the output of your data analysis. Not long ago, that really was an issue, but in the past few years R has become a great tool for <em>reproducable research</em>. The most simple procedure of saving your analysis for print or sharing is to:</p>
<ol style="list-style-type: decimal">
<li>save the R file your have created by hitting <code>CTRL-S</code> and selecting a directory and name.</li>
<li>in RStudio open <code>File --&gt; Compile notebook</code> and select Word as a format.</li>
<li>Hit <code>Compile</code></li>
</ol>
<p>A new Word document should appear that shows all code and the output. Now, you can copy-and-paste the graphics into another document or a presentation.</p>
</div>
<div id="bibliographic-notes" class="section level3">
<h3><span class="header-section-number">3.1.4</span> Bibliographic notes</h3>
<p><a href="http://www.calvin.edu/~rpruim/talks/Rminis/RStartingUp.pdf">Getting started with Rstudio (presentation)</a></p>
<p><a href="http://it-ebooks.info/book/2253/">Getting started with Rstudio (ebook)</a></p>
<p><a href="http://www.rstudio.com/resources/cheatsheets/">rstudio cheat sheets</a> is a collection of beautifully crafted cheat sheets for ggplot, dplyr and more. I suggest you print the data mangling and ggplot cheat sheets and always keep them on your desk.</p>
<p><a href="http://tidyverse.org/">The tidyverse</a> is a meta package that loads all core tidyverse packages by Hadley Wickham.</p>
</div>
</div>
<p style="text-align: center;">
<a href="3-getting-started-r.html"><button class="btn btn-default">Previous</button></a>
<a href="3-2-learning-r-a-primer.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>



</body>
</html>
